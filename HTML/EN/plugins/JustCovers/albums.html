[%- IF !ajaxUpdate %]
[%- pagetitle = 'PLUGIN_JUSTCOVERS' | string -%]

[%- extJsScripts = BLOCK -%]
<link type="text/css" rel=stylesheet href="[% webroot %]plugins/JustCovers/html/css/justcovers.css?v=[% jcversion %]" />
<script type="text/javascript" src="[% webroot %]plugins/JustCovers/html/js/justcovers.js?v=[% jcversion %]"></script>
        
<script type="text/javascript">
    [% PROCESS jsString id='SORT_BY' jsId='sort_by' %]
    [% PROCESS jsString id='ALBUM_DISPLAY_OPTIONS' jsId='display_options' %]

    var orderByList = {};
    [% FOREACH key = orderByList.keys.sort %]
    orderByList["[% key | string %]"] = '[% orderByList.$key | replace("'", "%27") %]';
    [%- END %]
    
    Ext.onReady(createOrderByControl);
 </script>

[%- END %]

[% IF hasPagebar -%]
[% pageHeaderInfo = BLOCK -%]
    [% PROCESS pagebar -%]
[% END -%]
[% END -%]
        
[% PROCESS pageheader.html  %]
[% END %]

[%# detected user-agents in 'browserType' -> 'Firefox' 'Opera' 'Safari' 'IE7' 'IE' %]

[%- BLOCK gencontrol -%]
    [% IF doFavorites %]
       [% IF album.isFavorite -%]
          [% WRAPPER favdellink noTarget=1 %]onclick="SqueezeJS.Utils.toggleFavorite(this, '[% album.playLink | replace("'", "%27") | uri %]', '[% crumb.values.-1 | html %]');"[% END -%]
       [% ELSE %]
          [% WRAPPER favaddlink noTarget=1 %]onclick="SqueezeJS.Utils.toggleFavorite(this, '[% album.playLink | replace("'", "%27") | uri %]', '[% crumb.values.-1 | html %]');"[% END -%]
       [% END -%]
    [% END %]
    [% WRAPPER playlink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% album.playLink | replace("'", "%27") %]&player=[% player | uri %]', 1, SqueezeJS.string('connecting_for'));"[% END %]
    [% IF allLinks; WRAPPER insertlink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% album.insertLink | replace("'", "%27") %]&player=[% player | uri %]', 1);"[% END; END %]
    [% WRAPPER addlink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% album.addLink | replace("'", "%27") %]&player=[% player | uri %]', 1);"[% END %]
    [% IF allLinks; WRAPPER removelink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% album.removeLink | replace("'", "%27") %]&player=[% player | uri %]', 1);"[% END; END %]
    [% WRAPPER cmdlink cmdimage='b_mmmix.gif' cmdtitle='MORE' %]href="[% webroot %]clixmlbrowser/clicmd=albuminfo+items&album_id=[% album.id %]&player=[% playerURI %]"[% END %]
[% END %]
        
<ul class="thumbwrap">
[%- FOREACH album = albums %]
<li class="thumbwrap" style="width:[% size + 20 + (extraPadding * 2) %]px;">
    <div style="padding:[% extraPadding %]px">
    <div id="db[% album.id %]_selector" class="selectorMarker" onmouseover="Highlighter.highlight(this);">
    <div class="selector_topRight"><div class="selector_topLeft"><div class="selector_bottomRight"><div class="selector_bottomLeft">

    <div class="thumbwrap">
        <div class="thumbArtwork[% IF browserType == 'Firefox' && showShadows %] shadow[% END -%]" style="width:[% size %]px;height:[% size %]px;">
            <a class="browseItemLink" href="[% webroot %]clixmlbrowser/clicmd=browselibrary+items&mode=tracks&linktitle=[% album.title %]&album_id=[% album.id %]&player=[% playerURI %]">
                <img onload="resize(this, [% size %])"
                    title="&quot;[% album.title %]&quot;[%- IF album.year %] ([% album.year %])[% END %] by [% album.artist %]"
                    alt="&quot;[% album.title %]&quot;[%- IF album.year %] ([% album.year %])[% END %] by [% album.artist %]"
                    src="[% webroot %]music/[% album.coverid %]/cover_[% size %]x[% size %]_o.jpg">
            </a>
            <span class="browsedbControls">[% PROCESS gencontrol %]</span>
        </div>

[% IF showTitle || showArtist || showYear || album.coverid == 0 %]
        <div class="artworkText"Added padding setting to let the use put some space in between album art. style="width:[% size %]px;">
            [%- IF showTitle || album.coverid == 0 %][% album.title %]<br/>[% END %]
            [%- IF showYear && album.year %][% album.year %]<br/>[% END %]
            [%- IF showArtist; album.artist; END -%]
        </div>
[% END %]
    </div>
    
    </div></div></div></div>
    </div>
    </div>
</li>
[%- END %]
</ul>

[% titleRight = BLOCK %]
    <div id="viewSelect"></div>
[%- END -%]

[%- infoTab = BLOCK -%]
<div>[% "ALBUMS" | string %] [% pageinfo.startitem + 1 %] [% "TO" | string %] [% pageinfo.enditem + 1 %] [% "OF" | string %] [% pageinfo.totalitems %]</div>
[%- END -%]

[%- IF !ajaxUpdate %]
[% PROCESS pagefooter.html %]
[% END %]

