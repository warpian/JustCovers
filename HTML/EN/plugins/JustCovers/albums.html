[%- IF !ajaxUpdate %]
[%- pagetitle = 'PLUGIN_JUSTCOVERS' | string -%]

[%- extJsScripts = BLOCK -%]
<link type="text/css" rel=stylesheet href="[% webroot %]plugins/JustCovers/html/css/justcovers.css" />
<script type="text/javascript" src="[% webroot %]plugins/JustCovers/html/js/justcovers.js"></script>
        
<script type="text/javascript">
    [% PROCESS jsString id='SORT_BY' jsId='sort_by' %]
    [% PROCESS jsString id='ALBUM_DISPLAY_OPTIONS' jsId='display_options' %]

    var orderByList = {};
    [% FOREACH key = orderByList.keys.sort %]
    orderByList["[% key | string %]"] = '[% orderByList.$key | replace("'", "%27") %]';
    [%- END %]
    
    Ext.onReady(createOrderByControl);
 </script>

[%- END %]

[% IF hasPagebar -%]
[% pageHeaderInfo = BLOCK -%]
    [% PROCESS pagebar -%]
[% END -%]
[% END -%]
        
[% PROCESS pageheader.html  %]
[% END %]

[%# detected user-agents in 'browserType' -> 'Firefox' 'Opera' 'Safari' 'IE7' 'IE' %]

[%- BLOCK gencontrol -%]
    [% IF item.isFavorite %]
        [% WRAPPER favdellink noTarget=1 %]onclick="SqueezeJS.Utils.toggleFavorite(this, '[% item.playLink | replace("'", "%27") | uri %]', '[% crumb.values.-1 | html %]');"[% END %]
    [% ELSE %]
        [% WRAPPER favaddlink noTarget=1 %]onclick="SqueezeJS.Utils.toggleFavorite(this, '[% item.playLink | replace("'", "%27") | uri %]', '[% crumb.values.-1 | html %]');"[% END %]
    [% END %]
    [% WRAPPER playlink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% item.playLink | replace("'", "%27") %]&player=[% player | uri %]', 1, SqueezeJS.string('connecting_for'));"[% END %]
    [% IF allLinks; WRAPPER insertlink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% item.insertLink | replace("'", "%27") %]&player=[% player | uri %]', 1);"[% END; END %]
    [% WRAPPER addlink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% item.addLink | replace("'", "%27") %]&player=[% player | uri %]', 1);"[% END %]
    [% IF allLinks; WRAPPER removelink %]onclick="SqueezeJS.Controller.urlRequest('[% webroot %][% item.removeLink | replace("'", "%27") %]&player=[% player | uri %]', 1);"[% END; END %]
    [% WRAPPER cmdlink cmdimage='b_mmmix.gif' cmdtitle='MORE' %]href="[% webroot %]clixmlbrowser/clicmd=albuminfo+items&album_id=[% item.id %]&player=[% playerURI %]"[% END %]
[% END %]
        
<ul class="thumbwrap">
[%- FOREACH item = albums %]
<li class="thumbwrap" style="width:[% size + 20 %]px;">
    <div id="db[% item.id %]_selector" class="selectorMarker" onmouseover="Highlighter.highlight(this);">
    <div class="selector_topRight"><div class="selector_topLeft"><div class="selector_bottomRight"><div class="selector_bottomLeft">

    <div class="thumbwrap">
        <div class="thumbArtwork" style="width:[% size %]px;height:[% size %]px;">
            <a class="browseItemLink" href="[% webroot %]clixmlbrowser/clicmd=browselibrary+items&mode=tracks&linktitle=[% item.title %]&album_id=[% item.id %]&player=[% playerURL %]">
                <img onload="resize(this, [% size %])"
                    title="&quot;[% item.title %]&quot;[%- IF item.year %] ([% item.year %])[% END %] by [% item.artist %]"
                    alt="&quot;[% item.title %]&quot;[%- IF item.year %] ([% item.year %])[% END %] by [% item.artist %]"
                    src="[% webroot %]music/[% item.coverid %]/cover_[% size %]x[% size %]_o.jpg">
            </a>
            <span class="browsedbControls">[% PROCESS gencontrol %]</span>
        </div>

        <div class="artworkText" style="width:[% size %]px;"></div>
    </div>
    
    </div></div></div></div>
    </div>
</li>
[%- END %]
</ul>

[% titleRight = BLOCK %]
    <div id="viewSelect"></div>
[%- END -%]

[%- infoTab = BLOCK -%]
<div>[% "ALBUMS" | string %] [% pageinfo.startitem + 1 %] [% "TO" | string %] [% pageinfo.enditem + 1 %] [% "OF" | string %] [% pageinfo.totalitems %]</div>
[%- END -%]

[%- IF !ajaxUpdate %]
[% PROCESS pagefooter.html %]
[% END %]

